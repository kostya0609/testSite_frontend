(function(){"use strict";var e={6357:function(e,t,n){var a=n(9963),l=n(6252);const s={key:0};function o(e,t,n,a,o,r){const i=(0,l.up)("nav-bar"),u=(0,l.up)("router-view"),d=(0,l.up)("pre-loader");return(0,l.wg)(),(0,l.j4)(d,{loading:a.loading,class:"px-3"},{default:(0,l.w5)((()=>[a.isOk?((0,l.wg)(),(0,l.iD)("div",s,[a.navBarVisible?((0,l.wg)(),(0,l.j4)(i,{key:0})):(0,l.kq)("",!0),(0,l.Wm)(u)])):(0,l.kq)("",!0)])),_:1},8,["loading"])}var r=n(2262),i=n(2201),u=n(9996);const d='\n    <path class="path" d="\n        M 30 15\n        L 28 17\n        M 25.61 25.61\n        A 15 15, 0, 0, 1, 15 30\n        A 15 15, 0, 1, 1, 27.99 7.5\n        L 15 15\n        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n  ';var c={__name:"preLoader",props:{loading:{type:Boolean,value:!1}},setup(e){return(t,n)=>{const a=(0,l.Q2)("loading");return(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{"element-loading-text":"Загрузка данных...","element-loading-spinner":d,"element-loading-svg-view-box":"-10, -10, 50, 50",class:"mx-auto"},[(0,l.WI)(t.$slots,"default")])),[[a,e.loading]])}}};const p=c;var m=p,f=n(3577);const w={class:"relative"};function v(e,t,n,a,s,o){const r=(0,l.up)("el-menu-item"),i=(0,l.up)("el-menu");return(0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)(i,{"default-active":a.activeIndex,mode:"horizontal",router:!0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.menu,((e,t)=>((0,l.wg)(),(0,l.j4)(r,{key:t,index:e.path},{default:(0,l.w5)((()=>[(0,l.Uk)((0,f.zw)(e.name),1)])),_:2},1032,["index"])))),128))])),_:1},8,["default-active"])])}var g={name:"navBar",setup(){const e=(0,l.f3)("user"),t=(0,r.iH)(e.roles.indexOf("admin")>=0),n=(0,i.yj)(),a=(0,i.tv)(),s=(0,r.qj)([]);a.getRoutes().forEach((e=>{e.meta.name&&(e.meta.forAdmin?t.value&&s.push({path:e.path,name:e.meta.name,order:e.meta.order}):s.push({path:e.path,name:e.meta.name,order:e.meta.order}))})),s.sort(((e,t)=>e.order-t.order));const o=(0,r.iH)(null);return(0,l.m0)((()=>{o.value=n.path})),{activeIndex:o,menu:s,route:n,router:a}}},y=n(3744);const _=(0,y.Z)(g,[["render",v]]);var h=_,b={name:"App",components:{PreLoader:m,NavBar:h},setup(){const e=(0,i.tv)(),t=(0,r.iH)(!1),n=(0,r.iH)(!1),a=({title:e="",message:t="",type:n="",duration:a=3e3}={})=>{(0,u.bM)({title:e,message:t,type:n,duration:a,dangerouslyUseHTMLString:!0})},s=(0,r.qj)({name:10,roles:[]}),o=(0,l.Fl)((()=>{let t=e.currentRoute.value.name;return["ListQuestions"].includes(t)})),d=()=>{t.value=!0,setTimeout((()=>{s.name="Vasya",s.roles.length=0,s.roles.push("admin"),n.value=!0,t.value=!1}),1e3)};return d(),(0,l.JJ)("user",s),(0,l.JJ)("notify",a),{loading:t,isOk:n,navBarVisible:o}}};const q=(0,y.Z)(b,[["render",o]]);var x=q;class k{_url="http://api.kostya0609.online/site";_version="v1";_endpoint="";constructor(e,t="v1"){this._endpoint=e,this._version=t}async _query({method:e="POST",nestedEndpoint:t="",payload:n=null,options:a={download_file:!1},params:l={}}={}){const s=new URL(`${this._url}/${this._version}/${this._endpoint}`+(t?`/${t}`:""));let o={method:e};if(l&&Object.entries(l).forEach((([e,t])=>{t&&s.searchParams.append(e,t)})),n){let e=n instanceof FormData;e?n.append("token",window.token):n.token=window.token,o={...o,body:e?n:JSON.stringify(n,(function(e,t){return"function"===typeof t?""+t:t})),headers:e?{}:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}}}const r=await fetch(s.href,o);return a.download_file?r:await r.json()}}class j extends k{constructor(){super("questions")}async add(e){const t=await this._query({payload:e,nestedEndpoint:"add"});if(!t.success)throw new Error(t.message);return t}async delete(e){const t=await this._query({payload:e,nestedEndpoint:"delete"});if(!t.success)throw new Error(t.message);return t}async list(e){const t=await this._query({payload:e,nestedEndpoint:"list"});if(!t.success)throw new Error(t.message);return t}async save(e){const t=await this._query({payload:e,nestedEndpoint:"save"});if(!t.success)throw new Error(t.message);return t}}class U extends k{constructor(){super("answers")}async add(e){const t=await this._query({payload:e,nestedEndpoint:"add"});if(!t.success)throw new Error(t.message);return t}async delete(e){const t=await this._query({payload:e,nestedEndpoint:"delete"});if(!t.success)throw new Error(t.message);return t}}const W=new j,S=new U,D=e=>((0,l.dD)("data-v-1421f484"),e=e(),(0,l.Cn)(),e),O={class:"px-0 sm:px-10 md:px-20 lg:px-32 xl:px-40 2xl:px-52 py-5"},V={class:"block sm:flex md:flex lg:flex xl:flex 2xl:flex justify-between"},H=D((()=>(0,l._)("h3",{class:"font-bold text-xl"},"Ответы на вопросы",-1))),E={key:0},I=D((()=>(0,l._)("h4",{class:"font-bold text-lg"},"Ваши ответы",-1)));var C={__name:"index",setup(e){const t=(0,l.f3)("notify"),n=(0,r.iH)(!1),a=(0,r.iH)([]),s=(0,r.iH)(!1),o=(0,r.qj)({}),i=(0,r.qj)([]),u=(0,l.Fl)((()=>Object.keys(o).length)),d=async()=>{try{n.value=!0;let e=await W.list({});i.length=0,e.data&&i.push(...e.data)}catch(e){t({title:"Получение данных о вопросах",message:e.message,type:"error",duration:5e3})}finally{n.value=!1}};return d(),(0,l.YP)((()=>s.value),(()=>{a.value=[]})),(e,t)=>{const d=(0,l.up)("el-switch"),c=(0,l.up)("el-radio"),p=(0,l.up)("el-radio-group"),w=(0,l.up)("el-collapse-item"),v=(0,l.up)("el-collapse");return(0,l.wg)(),(0,l.j4)((0,r.SU)(m),{loading:n.value},{default:(0,l.w5)((()=>[(0,l._)("div",O,[(0,l._)("div",V,[H,(0,l.Wm)(d,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"active-text":"Аккордеон","inactive-text":"Обычный"},null,8,["modelValue"])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i,((e,n)=>((0,l.wg)(),(0,l.j4)(v,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),key:"q_"+n+"_"+e.id,class:"questions_block ml-5",accordion:s.value},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{title:"Вопрос ID "+(n+1)+" - "+e.question},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{modelValue:o[e.id],"onUpdate:modelValue":t=>o[e.id]=t,class:"!block"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.answers,((e,t)=>((0,l.wg)(),(0,l.j4)(c,{key:"a_"+t+"_"+e.id,label:e.id,class:"!block pl-5 py-1"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Ответ ID "+(0,f.zw)(t+1+" - "+e.answer),1)])),_:2},1032,["label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["title"])])),_:2},1032,["modelValue","accordion"])))),128)),u.value?((0,l.wg)(),(0,l.iD)("div",E,[I,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o,((e,t)=>((0,l.wg)(),(0,l.iD)("p",{key:e+"_"+t,class:"pl-5 py-1"}," Вопрос ID"+(0,f.zw)(t)+" - "+(0,f.zw)(e?"Ответ ID"+e:" нет ответа"),1)))),128))])):(0,l.kq)("",!0)])])),_:1},8,["loading"])}}};const L=(0,y.Z)(C,[["__scopeId","data-v-1421f484"]]);var T=L,z={__name:"blueButton",props:{label:{type:String,value:""}},setup(e){return(t,n)=>{const a=(0,l.up)("el-button");return(0,l.wg)(),(0,l.j4)(a,{class:"uppercase blueButton"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,f.zw)(e.label),1)])),_:1})}}};const B=z;var P=B,A={__name:"returnButton",setup(e){return(e,t)=>((0,l.wg)(),(0,l.j4)((0,r.SU)(P),{label:"Назад",onClick:t[0]||(t[0]=e=>{(0,r.SU)(ye).back(1)})}))}};const Y=A;var $=Y,J=n(844);const K={class:"font-bold block mb-1"},M=(0,l._)("br",{class:"hidden lg:block xl:block 2xl:block"},null,-1);var Z={__name:"answerTemplate",props:{answer:Object,question_id:Number},setup(e){const t=(0,l.f3)("questionsList"),n=((0,l.f3)("user"),(0,l.f3)("notify"),(0,r.iH)(!1)),a=(e,n)=>{J.T.confirm(`Вы уверены, что хотите удалить ответ с ID ${n} у вопроса с ID ${e} ?`).then((async()=>{let a=t.findIndex((t=>t.id==e)),l=a>=0?t.find((t=>t.id==e)).answers.findIndex((e=>e.id==n)):null;l>=0&&t[a].answers.splice(l,1)})).catch((()=>{}))};return(t,s)=>{const o=(0,l.up)("el-input"),i=(0,l.up)("el-col"),u=(0,l.up)("CloseBold"),d=(0,l.up)("el-icon"),c=(0,l.up)("el-button"),p=(0,l.up)("el-row");return(0,l.wg)(),(0,l.j4)((0,r.SU)(m),{loading:n.value},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"mb-1 pl-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{md:12},{default:(0,l.w5)((()=>[(0,l._)("label",K,"Ответ ID - "+(0,f.zw)(e.answer.id),1),(0,l.Wm)(o,{modelValue:e.answer.answer,"onUpdate:modelValue":s[0]||(s[0]=t=>e.answer.answer=t),class:(0,f.C_)(["w-full",{"border border-red-500":!1}]),type:"textarea",rows:"2",placeholder:"Содержание ответа"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{md:2,class:"lg:ml-3 my-auto"},{default:(0,l.w5)((()=>[M,(0,l.Wm)(c,{size:"small",type:"danger",onClick:s[1]||(s[1]=t=>a(e.question_id,e.answer.id))},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["loading"])}}};const F=Z;var Q=F;const R={class:"font-bold text-xl mb-1"},N=(0,l._)("label",{class:"font-bold block mb-1"},"Содержание",-1),G=(0,l._)("br",{class:"hidden lg:block xl:block 2xl:block"},null,-1);var X={__name:"questionTemplate",props:{question:Object},setup(e){const t=(0,l.f3)("notify"),n=(0,l.f3)("questionsList"),a=(0,l.f3)("user"),s=(0,r.iH)(!1),o=e=>{J.T.confirm(`Вы уверены, что хотите удалить вопрос с ID ${e} ?`).then((async()=>{let t=n.findIndex((t=>t.id==e));t>=0&&n.splice(t,1)})).catch((()=>{}))},i=async e=>{try{s.value=!0;let l=await S.add({user_id:a.id,question_id:e});if(l.data){let a=n.findIndex((t=>t.id==e));a>=0&&n[a].answers.push({id:l.data.answer_id,answer:""}),t({title:"Добавление ответа",message:"Ответ в вопрос успешно добавлен",type:"success",duration:2e3})}}catch(l){t({title:"Добавление ответа в вопрос",message:l.message,type:"error",duration:5e3})}finally{s.value=!1}};return(t,n)=>{const a=(0,l.up)("el-input"),u=(0,l.up)("el-col"),d=(0,l.up)("CloseBold"),c=(0,l.up)("el-icon"),p=(0,l.up)("el-button"),w=(0,l.up)("el-row");return(0,l.wg)(),(0,l.j4)((0,r.SU)(m),{loading:s.value},{default:(0,l.w5)((()=>[(0,l._)("h3",R,"Вопрос ID - "+(0,f.zw)(e.question.id),1),(0,l.Wm)(w,{class:"mb-3 pl-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{md:12},{default:(0,l.w5)((()=>[N,(0,l.Wm)(a,{modelValue:e.question.question,"onUpdate:modelValue":n[0]||(n[0]=t=>e.question.question=t),class:(0,f.C_)(["w-full",{"border border-red-500":!1}]),placeholder:"Содержание вопроса"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u,{md:2,class:"lg:ml-3 my-auto"},{default:(0,l.w5)((()=>[G,(0,l.Wm)(p,{size:"small",type:"danger",onClick:n[1]||(n[1]=t=>o(e.question.id))},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1})])),_:1})])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.question.answers,((t,n)=>((0,l.wg)(),(0,l.j4)((0,r.SU)(Q),{key:"a_"+t.id+"_"+n,answer:e.question.answers[n],"onUpdate:answer":t=>e.question.answers[n]=t,question_id:e.question.id},null,8,["answer","onUpdate:answer","question_id"])))),128)),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{md:12,align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,r.SU)(P),{label:"Добавить ответ",onClick:n[2]||(n[2]=t=>i(e.question.id))})])),_:1})])),_:1})])),_:1},8,["loading"])}}};const ee=X;var te=ee;const ne={class:"flex justify-between"};var ae={__name:"questions",props:{value:Array},setup(e){const t=(0,l.f3)("questionsList"),n=(0,l.f3)("notify"),a=(0,l.f3)("user"),s=(0,r.iH)(!1),o=async()=>{try{s.value=!0;let e=await W.add({user_id:a.id});e.data&&(t.push({id:e.data.question_id,question:"",answers:[]}),n({title:"Добавление вопроса",message:"Успешно добавлен",type:"success",duration:2e3}))}catch(e){n({title:"Добавление вопроса",message:e.message,type:"error",duration:5e3})}finally{s.value=!1}},i=async()=>{let e=[];try{s.value=!0,await W.save({user_id:a.id,questionToSave:e}),n({title:"Сохранение вопросов",message:"Вопросы успешно сохранены",type:"success",duration:2e3})}catch(t){n({title:"Добавление вопроса",message:t.message,type:"error",duration:5e3})}finally{s.value=!1}};return(t,n)=>((0,l.wg)(),(0,l.j4)((0,r.SU)(m),{loading:s.value,class:"p-3"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.value,((t,n)=>((0,l.wg)(),(0,l.j4)((0,r.SU)(te),{key:"q_"+t.id+"_"+n,question:e.value[n],"onUpdate:question":t=>e.value[n]=t,class:"mb-5"},null,8,["question","onUpdate:question"])))),128)),(0,l._)("div",ne,[(0,l.Wm)((0,r.SU)(P),{label:"Добавить вопрос",onClick:o}),(0,l.Wm)((0,r.SU)(P),{label:"Сохранить вопросы",onClick:i})])])),_:1},8,["loading"]))}};const le=ae;var se=le;const oe={class:"font-bold text-xl"};function re(e,t,n,a,s,o){return(0,l.wg)(),(0,l.iD)("h3",oe,"В разработке")}var ie={name:"settings"};const ue=(0,y.Z)(ie,[["render",re]]);var de=ue;const ce={class:"flex justify-between mb-3"},pe=(0,l._)("h3",{class:"font-bold text-xl"},"Администрирование",-1);var me={__name:"index",setup(e){const t=(0,l.f3)("notify"),n=(0,r.iH)(!1),a=(0,r.iH)("questions"),s=(0,r.qj)({questions:"Вопросы",settings:"Настройки"}),o=(0,r.qj)([]),i=async()=>{try{n.value=!0;let e=await W.list({});o.length=0,e.data&&o.push(...e.data)}catch(e){t({title:"Получение данных о вопросах",message:e.message,type:"error",duration:5e3})}finally{n.value=!1}};return i(),(0,l.JJ)("questionsList",o),(e,t)=>{const i=(0,l.up)("el-tab-pane"),u=(0,l.up)("el-tabs");return(0,l.wg)(),(0,l.j4)((0,r.SU)(m),{loading:n.value,class:"py-3"},{default:(0,l.w5)((()=>[(0,l._)("div",ce,[pe,(0,l.Wm)((0,r.SU)($))]),(0,l.Wm)(u,{type:"border-card",modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s,((e,t)=>((0,l.wg)(),(0,l.j4)(i,{label:e,name:t,key:t},null,8,["label","name"])))),128)),"questions"!==a.value||n.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)((0,r.SU)(se),{key:0,value:o,"onUpdate:value":t[0]||(t[0]=e=>o=e)},null,8,["value"])),"settings"!==a.value||n.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)((0,r.SU)(de),{key:1}))])),_:1},8,["modelValue"])])),_:1},8,["loading"])}}};const fe=me;var we=fe;const ve=[{path:"/site/questions/",children:[{path:"list",name:"ListQuestions",component:T,meta:{name:"Вопросы ответы",forAdmin:!1,order:1}}]},{path:"/site/admin/",name:"AdminPage",component:we,meta:{name:"Админка",forAdmin:!0,order:2}}],ge=(0,i.p7)({history:(0,i.PO)("/"),routes:ve,previous:null});ge.beforeEach(((e,t,n)=>{ge.previous=t.name,!ge.getRoutes().find((t=>t.name===e.name))&&ge.push({name:"ListQuestions"}),n()}));var ye=ge,_e=n(1181),he=n(3660),be=n(7484),qe=n.n(be),xe=(n(600),n(5781));qe().locale("ru");const ke=(0,a.ri)(x);ke.use(_e.Z,{locale:he.Z}),ke.use(ye);for(const[je,Ue]of Object.entries(xe))ke.component(je,Ue);ke.mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,s){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],l=e[d][1],s=e[d][2];for(var r=!0,i=0;i<a.length;i++)(!1&s||o>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(r=!1,s<o&&(o=s));if(r){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,l,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,s,o=a[0],r=a[1],i=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(i)var d=i(n)}for(t&&t(a);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},a=self["webpackChunksite"]=self["webpackChunksite"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(6357)}));a=n.O(a)})();
//# sourceMappingURL=app.861e17a9.js.map